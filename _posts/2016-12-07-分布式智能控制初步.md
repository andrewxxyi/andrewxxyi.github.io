---
layout: post
title: 分布式智能控制初步
date: 2016-12-07
---
在[物联网（智能控制）的发展方向](http://course.pythonpi.top:10008/course_play.html?coursewareID=ed206ab6f9fe46f595b35a1afa3fdf24)中，我认为智能控制下一步的发展重心将是开发分布式的中间协调层，这样的中间协调层的首要目标是为了在大规模传感器网络中如何进行有效的控制逻辑设计而准备。

谈到这样的智能控制逻辑，首先想到的就是用产生式来构造控制逻辑知识库，但产生式有几个问题：

- 当知识库规模增大后，新增知识和原有知识的协调很难
- 产生式为平行结构，没有组织，只看条件是否满足，这样当控制逻辑需要调整时会比较困难，先要找出所有有关系的产生式，然后进行调整，又很可能会将变化泛播到其它产生式
- 产生式属于典型的数据驱动，缺少控制逻辑，对于一致性的要求比较高，如果某控制功能和信号时序相关很难保证时序的一致性

所以当前的初步考虑就是控制逻辑这一块先按功能进行分割，每个功能以一个状态机来实现，这样可以极大的简化控制知识库的管理。

这样一来，整个系统的组件就大致包括：

- 分布式消息系统，这个简单，消息队列很多，就选rabbitMQ好了
- 输入组件，采集gpio、i2c、下联单片机、下属其它设备的输入信号
- 动作组件，控制gpio、i2c、下联单片机、下属其它设备的输出
- 条件组件，对输入信号进行筛选和识别，触发输入事件
- 状态机组件，遵照事件触发的工作机制，以有限状态自动机为手段实现功能逻辑
- 控制逻辑组件，组装上述各组件使之协调工作完成既定功能

状态机的缺点是组织性太强，未来的智能化将非常困难，在这方面就不如产生式这样的平行结构，当新知识和原有知识的协调问题得以解决后，知识库的增长就是自动的。
